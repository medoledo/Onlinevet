{% extends 'base.html' %}
{% load static %}

{% block content %}
<h1>Owners List</h1>

<!-- Search Form -->
<form method="GET" class="mb-4">
    <div class="d-flex">
        <input type="text" name="search_name" placeholder="Search by Name" value="{{ request.GET.search_name }}" class="form-control mr-2">
        <input type="text" name="search_number" placeholder="Search by Phone Number" value="{{ request.GET.search_number }}" class="form-control mr-2">
        <button type="submit" class="btn btn-info">Search</button>
    </div>
</form>

<!-- Add Owner and Add Pet Type Buttons -->
<a href="{% url 'add_owner' %}" class="btn btn-primary">Add Owner</a>
<a href="{% url 'add_pet_type' %}" class="btn btn-success">Add Pet Type</a>

<!-- Owners Table -->
<table class="table">
    <thead>
        <tr>
            <th>Name</th>
            <th>Phone Number</th>
            <th>Pet Name</th>
            <th>Pet Type</th>
            <th>Sex</th>
            <th>Actions</th>
        </tr>
    </thead>
    <tbody>
        {% for owner in owners %}
            <tr>
                <td>{{ owner.name }}</td>
                <td>{{ owner.phone_number }}</td>
                <td>{{ owner.pet_name }}</td>
                <td>{{ owner.pet_type }}</td>
                <td>{{ owner.sex }}</td>
                <td>
                    <a href="{% url 'edit_owner' owner.id %}" class="btn btn-warning">Edit</a>
                </td>
            </tr>
        {% endfor %}
    </tbody>
</table>

<!-- Download Button -->
<div class="text-end mb-3">
    <a href="{% url 'download_owners' %}?search_name={{ request.GET.search_name }}&search_number={{ request.GET.search_number }}" class="btn btn-secondary">Download Owners as Excel</a>
</div>

<style>
    /* Table Styling */
    table {
        width: 100%;
        border-collapse: collapse;
        margin-top: 20px;
    }

    th, td {
        padding: 12px;
        text-align: left;
        border-bottom: 1px solid #ddd;
    }

    th {
        background-color: #f2f2f2;
        color: #333;
    }

    tr:hover {
        background-color: #f1f1f1;
    }

    /* Button Styling */
    .btn {
        padding: 8px 16px;
        text-decoration: none;
        color: white;
        border-radius: 5px;
        font-weight: bold;
    }

    .btn-primary {
        background-color: #007bff;
        border: none;
    }

    .btn-warning {
        background-color: #ffc107;
        border: none;
    }

    .btn-success {
        background-color: #28a745;
        border: none;
    }

    .btn-info {
        background-color: #17a2b8;
        border: none;
    }

    .btn-secondary {
        background-color: #6c757d;
        border: none;
    }

    .btn:hover {
        opacity: 0.8;
    }
</style>

{% endblock %}
